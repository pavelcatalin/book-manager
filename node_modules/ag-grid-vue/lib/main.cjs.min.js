var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(e,t)=>{for(var r in t)__defProp(e,r,{get:t[r],enumerable:!0})},__copyProps=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of __getOwnPropNames(t))!__hasOwnProp.call(e,o)&&o!==r&&__defProp(e,o,{get:()=>t[o],enumerable:!(n=__getOwnPropDesc(t,o))||n.enumerable});return e},__toESM=(e,t,r)=>(r=e!=null?__create(__getProtoOf(e)):{},__copyProps(t||!e||!e.__esModule?__defProp(r,"default",{value:e,enumerable:!0}):r,e)),__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),__decorateClass=(e,t,r,n)=>{for(var o=n>1?void 0:n?__getOwnPropDesc(t,r):t,s=e.length-1,a;s>=0;s--)(a=e[s])&&(o=(n?a(t,r,o):a(o))||o);return n&&o&&__defProp(t,r,o),o},main_exports={};__export(main_exports,{AgGridVue:()=>AgGridVue}),module.exports=__toCommonJS(main_exports);var import_vue_property_decorator=require("vue-property-decorator"),import_ag_grid_community4=require("ag-grid-community"),import_ag_grid_community=require("ag-grid-community"),import_vue=__toESM(require("vue")),VueComponentFactory=class{static getComponentType(e,t){if(typeof t=="string"){const r=this.searchForComponentInstance(e,t);return r?import_vue.default.extend(r):(console.error(`Could not find component with name of ${t}. Is it in Vue.components?`),null)}else return t}static createAndMountComponent(e,t,r){const n={data:{params:Object.freeze(e)},parent:r};r.componentDependencies&&r.componentDependencies.forEach(s=>n[s]=r[s]);const o=new t(n);return o.$mount(),o}static searchForComponentInstance(e,t,r=10,n=!1){let o=null,s=e.$parent,a=0;for(;!o&&s&&s.$options&&++a<r;){const p=s;p.$options&&p.$options.components&&p.$options.components[t]?o=p.$options.components[t]:p[t]&&(o=p[t]),s=s.$parent}return!o&&!n?(console.error(`Could not find component with name of ${t}. Is it in Vue.components?`),null):o}},VueFrameworkComponentWrapper=class extends import_ag_grid_community.BaseComponentWrapper{constructor(e){super(),this.parent=e}createWrapper(e){const t=this;class r extends VueComponent{init(s){super.init(s)}hasMethod(s){return n.getFrameworkComponentInstance()[s]!=null}callMethod(s,a){const p=this.getFrameworkComponentInstance();return n.getFrameworkComponentInstance()[s].apply(p,a)}addMethod(s,a){n[s]=a}overrideProcessing(s){return t.parent.autoParamsRefresh&&s==="refresh"}processMethod(s,a){return s==="refresh"&&(this.getFrameworkComponentInstance().params=a[0]),this.hasMethod(s)?this.callMethod(s,a):s==="refresh"}createComponent(s){return t.createComponent(e,s)}}const n=new r;return n}createComponent(e,t){const r=VueComponentFactory.getComponentType(this.parent,e);if(r)return VueComponentFactory.createAndMountComponent(t,r,this.parent)}createMethodProxy(e,t,r){return function(){return e.overrideProcessing(t)?e.processMethod(t,arguments):e.hasMethod(t)?e.callMethod(t,arguments):(r&&console.warn("AG Grid: Framework component is missing the method "+t+"()"),null)}}destroy(){this.parent=null}};VueFrameworkComponentWrapper=__decorateClass([(0,import_ag_grid_community.Bean)("frameworkComponentWrapper")],VueFrameworkComponentWrapper);var VueComponent=class{getGui(){return this.component.$el}destroy(){this.getFrameworkComponentInstance()&&typeof this.getFrameworkComponentInstance().destroy=="function"&&this.getFrameworkComponentInstance().destroy(),this.component.$destroy()}getFrameworkComponentInstance(){return this.component}init(e){this.component=this.createComponent(e)}},import_ag_grid_community2=require("ag-grid-community"),getAgGridProperties=()=>{const e={gridOptions:{default(){return{}}},rowDataModel:void 0},t=["context","popupParent"],r=import_ag_grid_community2.ComponentUtil.ALL_PROPERTIES.filter(i=>!t.includes(i)),n=(i,c)=>{const d={};return i.forEach(u=>{c[u]!==import_ag_grid_community2.ComponentUtil.VUE_OMITTED_PROPERTY&&(d[u]=c[u])}),d},o=(i,c,d)=>{if(!d.gridCreated||!d.api)return;const u={};Object.entries(c).forEach(([l,h])=>{i[l]!==h&&(u[l]=h)}),import_ag_grid_community2.ComponentUtil.processOnChange(u,d.api)},s={props(){return n(r,this)},shallowProps(){return n(t,this)}},a={rowDataModel(i,c){!this.gridCreated||!this.api||i!==c&&(i&&c&&i.length===c.length&&i.every((d,u)=>d===c[u])||import_ag_grid_community2.ComponentUtil.processOnChange({rowData:i},this.api))},props:{handler(i,c){o(c,i,this)},deep:!0},shallowProps:{handler(i,c){o(c,i,this)},deep:!1}};return import_ag_grid_community2.ComponentUtil.ALL_PROPERTIES.forEach(i=>{e[i]={default:import_ag_grid_community2.ComponentUtil.VUE_OMITTED_PROPERTY}}),[e,s,a,{prop:"rowDataModel",event:"data-model-changed"}]},import_ag_grid_community3=require("ag-grid-community"),VueFrameworkOverrides=class extends import_ag_grid_community3.VanillaFrameworkOverrides{constructor(e){super("vue"),this.parent=e}frameworkComponent(e,t){let r=!!VueComponentFactory.searchForComponentInstance(this.parent,e,10,!0),n=r?e:null;if(!n&&t&&t[e]){const o=t[e];r=!!VueComponentFactory.searchForComponentInstance(this.parent,o,10,!0),n=r?o:null}return n}isFrameworkComponent(e){return typeof e=="object"}},[props,computed,watch,model]=getAgGridProperties(),AgGridVue=class extends import_vue_property_decorator.Vue{constructor(){super(...arguments),this.gridCreated=!1,this.isDestroyed=!1,this.gridReadyFired=!1,this.api=void 0,this.emitRowModel=null}static kebabProperty(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}render(e){return e("div")}globalEventListenerFactory(e){return(t,r)=>{if(this.isDestroyed)return;t==="gridReady"&&(this.gridReadyFired=!0);const n=import_ag_grid_community4.ALWAYS_SYNC_GLOBAL_EVENTS.has(t);if(n&&!e||!n&&e)return;this.updateModelIfUsed(t);const o=AgGridVue.kebabProperty(t);this.$listeners[o]?this.$emit(o,r):this.$listeners[t]&&this.$emit(t,r)}}mounted(){this.emitRowModel=this.debounce(()=>{this.$emit("data-model-changed",Object.freeze(this.getRowData()))},20);const e=new VueFrameworkComponentWrapper(this),t=import_ag_grid_community4.ComponentUtil.combineAttributesAndGridOptions(this.gridOptions,this);this.checkForBindingConflicts();const r=this.getRowDataBasedOnBindings();r!==import_ag_grid_community4.ComponentUtil.VUE_OMITTED_PROPERTY&&(t.rowData=r);const n={globalEventListener:this.globalEventListenerFactory().bind(this),globalSyncEventListener:this.globalEventListenerFactory(!0).bind(this),frameworkOverrides:new VueFrameworkOverrides(this),providedBeanInstances:{frameworkComponentWrapper:e},modules:this.modules};this.api=(0,import_ag_grid_community4.createGrid)(this.$el,t,n),this.gridCreated=!0}destroyed(){var e;this.gridCreated&&((e=this.api)==null||e.destroy(),this.isDestroyed=!0)}checkForBindingConflicts(){const e=this;(e.rowData||this.gridOptions.rowData)&&e.rowDataModel&&console.warn("AG Grid: Using both rowData and rowDataModel. rowData will be ignored.")}getRowData(){var e;const t=[];return(e=this.api)==null||e.forEachNode(r=>{t.push(r.data)}),t}updateModelIfUsed(e){this.gridReadyFired&&this.$listeners["data-model-changed"]&&AgGridVue.ROW_DATA_EVENTS.has(e)&&this.emitRowModel&&this.emitRowModel()}getRowDataBasedOnBindings(){const e=this,t=e.rowDataModel;return t||(e.rowData?e.rowData:e.gridOptions.rowData)}debounce(e,t){let r;return()=>{const n=function(){e()};window.clearTimeout(r),r=window.setTimeout(n,t)}}};AgGridVue.ROW_DATA_EVENTS=new Set(["rowDataUpdated","cellValueChanged","rowValueChanged"]),__decorateClass([(0,import_vue_property_decorator.Prop)(Boolean)],AgGridVue.prototype,"autoParamsRefresh",2),__decorateClass([(0,import_vue_property_decorator.Prop)({default:()=>[]})],AgGridVue.prototype,"componentDependencies",2),__decorateClass([(0,import_vue_property_decorator.Prop)({default:()=>[]})],AgGridVue.prototype,"modules",2),AgGridVue=__decorateClass([(0,import_ag_grid_community4.Bean)("agGridVue"),(0,import_vue_property_decorator.Component)({props,computed,watch,model})],AgGridVue);
