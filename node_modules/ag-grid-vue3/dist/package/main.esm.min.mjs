import{ALWAYS_SYNC_GLOBAL_EVENTS as Oe,ComponentUtil as Ee,_combineAttributesAndGridOptions as Ie,_processOnChange as Me,_warnOnce as Te,createGrid as ye}from"ag-grid-community";function Z(e,t){const n=new Set(e.split(","));return t?s=>n.has(s.toLowerCase()):s=>n.has(s)}var At=Object.freeze({}),Pt=Object.freeze([]),J=Object.assign,Se=Object.prototype.hasOwnProperty,R=(e,t)=>Se.call(e,t),m=Array.isArray,g=e=>Q(e)==="[object Map]",Ae=e=>typeof e=="string",v=e=>typeof e=="symbol",O=e=>e!==null&&typeof e=="object",Pe=Object.prototype.toString,Q=e=>Pe.call(e),X=e=>Q(e).slice(8,-1),x=e=>Ae(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,E=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},De=/-(\w)/g,Dt=E(e=>e.replace(De,(t,n)=>n?n.toUpperCase():"")),$e=/\B([A-Z])/g,$t=E(e=>e.replace($e,"-$1").toLowerCase()),k=E(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ft=E(e=>e?`on${k(e)}`:""),I=(e,t)=>!Object.is(e,t),Fe=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},xe="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",xt=Z(xe+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");function _(e,...t){console.warn(`[Vue warn] ${e}`,...t)}var ee;function je(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}var M=!0,j=0,te=[];function Le(){te.push(M),M=!1}function Ke(){const e=te.pop();M=e===void 0?!0:e}function L(){j++}function K(){for(j--;!j&&z.length;)z.shift()()}function ze(e,t,n){var s;if(t.get(e)!==e._trackId){t.set(e,e._trackId);const r=e.deps[e._depsLength];r!==t?(r&&je(r,e),e.deps[e._depsLength++]=t):e._depsLength++,(s=e.onTrack)==null||s.call(e,J({effect:e},n))}}var z=[];function Ue(e,t,n){var s;L();for(const r of e.keys()){let o;r._dirtyLevel<t&&(o??(o=e.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=t),r._shouldSchedule&&(o??(o=e.get(r)===r._trackId))&&((s=r.onTrigger)==null||s.call(r,J({effect:r},n)),r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&z.push(r.scheduler)))}K()}var Ve=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},U=new WeakMap,w=Symbol("iterate"),V=Symbol("Map key iterate");function u(e,t,n){if(M&&ee){let s=U.get(e);s||U.set(e,s=new Map);let r=s.get(n);r||s.set(n,r=Ve(()=>s.delete(n))),ze(ee,r,{target:e,type:t,key:n})}}function h(e,t,n,s,r,o){const a=U.get(e);if(!a)return;let i=[];if(t==="clear")i=[...a.values()];else if(n==="length"&&m(e)){const l=Number(s);a.forEach((d,f)=>{(f==="length"||!v(f)&&f>=l)&&i.push(d)})}else switch(n!==void 0&&i.push(a.get(n)),t){case"add":m(e)?x(n)&&i.push(a.get("length")):(i.push(a.get(w)),g(e)&&i.push(a.get(V)));break;case"delete":m(e)||(i.push(a.get(w)),g(e)&&i.push(a.get(V)));break;case"set":g(e)&&i.push(a.get(w));break}L();for(const l of i)l&&Ue(l,4,{target:e,type:t,key:n,newValue:s,oldValue:r,oldTarget:o});K()}var Be=Z("__proto__,__v_isRef,__isVue"),ne=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(v)),re=We();function We(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const s=c(this);for(let o=0,a=this.length;o<a;o++)u(s,"get",o+"");const r=s[t](...n);return r===-1||r===!1?s[t](...n.map(c)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Le(),L();const s=c(this)[t].apply(this,n);return K(),Ke(),s}}),e}function Ye(e){v(e)||(e=String(e));const t=c(this);return u(t,"has",e),t.hasOwnProperty(e)}var se=class{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){const s=this._isReadonly,r=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return r;if(t==="__v_raw")return n===(s?r?rt:fe:r?nt:de).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=m(e);if(!s){if(o&&R(re,t))return Reflect.get(re,t,n);if(t==="hasOwnProperty")return Ye}const a=Reflect.get(e,t,n);return(v(t)?ne.has(t):Be(t))||(s||u(e,"get",t),r)?a:H(a)?o&&x(t)?a:a.value:O(a)?s?pe(a):he(a):a}},Ne=class extends se{constructor(e=!1){super(!1,e)}set(e,t,n,s){let r=e[t];if(!this._isShallow){const i=W(r);if(!at(n)&&!W(n)&&(r=c(r),n=c(n)),!m(e)&&H(r)&&!H(n))return i?!1:(r.value=n,!0)}const o=m(e)&&x(t)?Number(t)<e.length:R(e,t),a=Reflect.set(e,t,n,s);return e===c(s)&&(o?I(n,r)&&h(e,"set",t,n,r):h(e,"add",t,n)),a}deleteProperty(e,t){const n=R(e,t),s=e[t],r=Reflect.deleteProperty(e,t);return r&&n&&h(e,"delete",t,void 0,s),r}has(e,t){const n=Reflect.has(e,t);return(!v(t)||!ne.has(t))&&u(e,"has",t),n}ownKeys(e){return u(e,"iterate",m(e)?"length":w),Reflect.ownKeys(e)}},Ge=class extends se{constructor(e=!1){super(!0,e)}set(e,t){return _(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0}deleteProperty(e,t){return _(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0}},He=new Ne,qe=new Ge,B=e=>e,T=e=>Reflect.getPrototypeOf(e);function y(e,t,n=!1,s=!1){e=e.__v_raw;const r=c(e),o=c(t);n||(I(t,o)&&u(r,"get",t),u(r,"get",o));const{has:a}=T(r),i=s?B:n?G:N;if(a.call(r,t))return i(e.get(t));if(a.call(r,o))return i(e.get(o));e!==r&&e.get(t)}function S(e,t=!1){const n=this.__v_raw,s=c(n),r=c(e);return t||(I(e,r)&&u(s,"has",e),u(s,"has",r)),e===r?n.has(e):n.has(e)||n.has(r)}function A(e,t=!1){return e=e.__v_raw,!t&&u(c(e),"iterate",w),Reflect.get(e,"size",e)}function oe(e){e=c(e);const t=c(this);return T(t).has.call(t,e)||(t.add(e),h(t,"add",e,e)),this}function ae(e,t){t=c(t);const n=c(this),{has:s,get:r}=T(n);let o=s.call(n,e);o?ue(n,s,e):(e=c(e),o=s.call(n,e));const a=r.call(n,e);return n.set(e,t),o?I(t,a)&&h(n,"set",e,t,a):h(n,"add",e,t),this}function ie(e){const t=c(this),{has:n,get:s}=T(t);let r=n.call(t,e);r?ue(t,n,e):(e=c(e),r=n.call(t,e));const o=s?s.call(t,e):void 0,a=t.delete(e);return r&&h(t,"delete",e,void 0,o),a}function ce(){const e=c(this),t=e.size!==0,n=g(e)?new Map(e):new Set(e),s=e.clear();return t&&h(e,"clear",void 0,void 0,n),s}function P(e,t){return function(s,r){const o=this,a=o.__v_raw,i=c(a),l=t?B:e?G:N;return!e&&u(i,"iterate",w),a.forEach((d,f)=>s.call(r,l(d),l(f),o))}}function D(e,t,n){return function(...s){const r=this.__v_raw,o=c(r),a=g(o),i=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,d=r[e](...s),f=n?B:t?G:N;return!t&&u(o,"iterate",l?V:w),{next(){const{value:C,done:F}=d.next();return F?{value:C,done:F}:{value:i?[f(C[0]),f(C[1])]:f(C),done:F}},[Symbol.iterator](){return this}}}}function p(e){return function(...t){{const n=t[0]?`on key "${t[0]}" `:"";_(`${k(e)} operation ${n}failed: target is readonly.`,c(this))}return e==="delete"?!1:e==="clear"?void 0:this}}function Ze(){const e={get(o){return y(this,o)},get size(){return A(this)},has:S,add:oe,set:ae,delete:ie,clear:ce,forEach:P(!1,!1)},t={get(o){return y(this,o,!1,!0)},get size(){return A(this)},has:S,add:oe,set:ae,delete:ie,clear:ce,forEach:P(!1,!0)},n={get(o){return y(this,o,!0)},get size(){return A(this,!0)},has(o){return S.call(this,o,!0)},add:p("add"),set:p("set"),delete:p("delete"),clear:p("clear"),forEach:P(!0,!1)},s={get(o){return y(this,o,!0,!0)},get size(){return A(this,!0)},has(o){return S.call(this,o,!0)},add:p("add"),set:p("set"),delete:p("delete"),clear:p("clear"),forEach:P(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=D(o,!1,!1),n[o]=D(o,!0,!1),t[o]=D(o,!1,!0),s[o]=D(o,!0,!0)}),[e,n,t,s]}var[Je,Qe,Xe,ke]=Ze();function le(e,t){const n=t?e?ke:Xe:e?Qe:Je;return(s,r,o)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?s:Reflect.get(R(n,r)&&r in s?n:s,r,o)}var et={get:le(!1,!1)},tt={get:le(!0,!1)};function ue(e,t,n){const s=c(n);if(s!==n&&t.call(e,s)){const r=X(e);_(`Reactive ${r} contains both the raw and reactive versions of the same object${r==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var de=new WeakMap,nt=new WeakMap,fe=new WeakMap,rt=new WeakMap;function st(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ot(e){return e.__v_skip||!Object.isExtensible(e)?0:st(X(e))}function he(e){return W(e)?e:me(e,!1,He,et,de)}function pe(e){return me(e,!0,qe,tt,fe)}function me(e,t,n,s,r){if(!O(e))return _(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=r.get(e);if(o)return o;const a=ot(e);if(a===0)return e;const i=new Proxy(e,a===2?s:n);return r.set(e,i),i}function W(e){return!!(e&&e.__v_isReadonly)}function at(e){return!!(e&&e.__v_isShallow)}function c(e){const t=e&&e.__v_raw;return t?c(t):e}function Y(e){return Object.isExtensible(e)&&Fe(e,"__v_skip",!0),e}var N=e=>O(e)?he(e):e,G=e=>O(e)?pe(e):e;function H(e){return!!(e&&e.__v_isRef===!0)}import{defineComponent as it,getCurrentInstance as ct,h as lt}from"vue";import{ComponentUtil as b,_processOnChange as we}from"ag-grid-community";import{markRaw as ge,toRaw as ut}from"vue";var dt=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),ft=e=>`on${e.charAt(0).toUpperCase()}${e.substring(1,e.length)}`,ve=e=>e&&(Object.isFrozen(e)?e:ge(ut(e))),ht=()=>{const e={};b.PUBLIC_EVENTS.map(r=>ft(dt(r))).forEach(r=>e[r]=void 0);const n={},s={modelValue:{handler(r,o){!this.gridCreated||!this.api||r!==o&&(r&&o&&r.length===o.length&&r.every((a,i)=>a===o[i])||we({rowData:r},this.api))},deep:!0}};return b.ALL_PROPERTIES.filter(r=>r!="gridOptions").forEach(r=>{e[r]={default:b.VUE_OMITTED_PROPERTY},s[r]={handler(o,a){let i=o;r==="rowData"&&o!=b.VUE_OMITTED_PROPERTY&&(i=ve(o)),this.batchChanges[r]=i===b.VUE_OMITTED_PROPERTY?void 0:i,this.batchTimeout==null&&(this.batchTimeout=setTimeout(()=>{this.batchTimeout=null,we(this.batchChanges,this.api),this.batchChanges=ge({})},0))},deep:!0}}),[e,n,s]};import{BaseComponentWrapper as pt,_warnOnce as mt}from"ag-grid-community";import{_errorOnce as wt}from"ag-grid-community";import{createVNode as gt,defineComponent as vt,render as _e}from"vue";function be(e){wt(`Could not find component with name of ${e}. Is it in Vue.components?`)}var q=class Re{static getComponentDefinition(t,n){let s;return typeof t=="string"?s=this.searchForComponentInstance(n,t):s={extends:vt({...t})},s||be(t),s.extends?(s.extends.setup&&(s.setup=s.extends.setup),s.extends.props=this.addParamsToProps(s.extends.props)):s.props=this.addParamsToProps(s.props),s}static addParamsToProps(t){return!t||Array.isArray(t)&&t.indexOf("params")===-1?t=["params",...t||[]]:typeof t=="object"&&!t.params&&(t.params={type:Object}),t}static createAndMountComponent(t,n,s,r){const o=Re.getComponentDefinition(t,s);if(!o)return;const{vNode:a,destroy:i,el:l}=this.mount(o,{params:Object.freeze(n)},s,r||{});return{componentInstance:a.component.proxy,element:l,destroy:i}}static mount(t,n,s,r){let o=gt(t,n);o.appContext=s.$.appContext,o.appContext.provides={...r,...o.appContext.provides?o.appContext.provides:{},...s.$parent.$options.provide?s.$parent.$options.provide:{}};let a=document.createElement("div");return _e(o,a),{vNode:o,destroy:()=>{a&&_e(null,a),a=null,o=null},el:a}}static searchForComponentInstance(t,n,s=10,r=!1){let o=null,a=t.$parent,i=0;for(;!o&&a&&a.$options&&++i<s;){const l=a;l.$options&&l.$options.components&&l.$options.components[n]?o=l.$options.components[n]:l[n]&&(o=l[n]),a=a.$parent}if(!o){const l=t.$.appContext.components;l&&l[n]&&(o=l[n])}return!o&&!r?(be(n),null):o}},_t=class $ extends pt{constructor(t,n){super(),this.parent=t,$.provides||($.provides=n)}createWrapper(t){const n=this;class s extends bt{init(a){super.init(a)}hasMethod(a){const i=r.getFrameworkComponentInstance();return i[a]?!0:i.$.setupState[a]!=null}callMethod(a,i){const l=this.getFrameworkComponentInstance(),d=r.getFrameworkComponentInstance();return d[a]?d[a].apply(l,i):d.$.setupState[a]?.apply(l,i)}addMethod(a,i){r[a]=i}processMethod(a,i){return a==="refresh"&&(this.getFrameworkComponentInstance().params=i[0]),this.hasMethod(a)?this.callMethod(a,i):a==="refresh"}createComponent(a){return n.createComponent(t,a)}}const r=new s;return r}createComponent(t,n){return q.createAndMountComponent(t,n,this.parent,$.provides)}createMethodProxy(t,n,s){return function(){return t.hasMethod(n)?t.callMethod(n,arguments):(s&&mt("Framework component is missing the method "+n+"()"),null)}}destroy(){this.parent=null}},bt=class{getGui(){return this.element}destroy(){this.getFrameworkComponentInstance()&&typeof this.getFrameworkComponentInstance().destroy=="function"&&this.getFrameworkComponentInstance().destroy(),this.unmount()}getFrameworkComponentInstance(){return this.componentInstance}init(e){const{componentInstance:t,element:n,destroy:s}=this.createComponent(e);this.componentInstance=t,this.unmount=s,this.element=n.firstElementChild??n}};import{VanillaFrameworkOverrides as Ct}from"ag-grid-community";var Rt=class extends Ct{constructor(e){super("vue"),this.parent=e}frameworkComponent(e,t){let n=q.searchForComponentInstance(this.parent,e,10,!0)?e:null;if(!n&&t&&t[e]){const s=t[e];n=q.searchForComponentInstance(this.parent,s,10,!0)?s:null}return n}isFrameworkComponent(e){return typeof e=="object"}},Ot=new Set(["rowDataUpdated","cellValueChanged","rowValueChanged"]),Ce="onUpdate:modelValue",Et="update:modelValue",[It,Mt,Tt]=ht(),yt=it({render(){return lt("div")},props:{gridOptions:{type:Object,default:()=>({})},componentDependencies:{type:Array,default:()=>[]},plugins:[],modules:{type:Array,default:()=>[]},modelValue:{type:Array,default:void 0,required:!1},...It},data(){return{api:void 0,gridCreated:!1,isDestroyed:!1,gridReadyFired:!1,emitRowModel:void 0,batchTimeout:null,batchChanges:Y({})}},computed:Mt,watch:Tt,methods:{globalEventListenerFactory(e){return t=>{if(this.isDestroyed)return;t==="gridReady"&&(this.gridReadyFired=!0);const n=Oe.has(t);n&&!e||!n&&e||this.updateModelIfUsed(t)}},processChanges(e,t,n){if(this.gridCreated){if(this.skipChange(e,t,n))return;const s={[e]:e==="rowData"?Object.isFrozen(t)?t:Y(c(t)):t};Me(s,this.api)}},checkForBindingConflicts(){const e=this;(e.rowData&&e.rowData!=="AG-VUE-OMITTED-PROPERTY"||this.gridOptions.rowData)&&e.modelValue&&Te("Using both rowData and v-model. rowData will be ignored.")},getRowData(){const e=[];return this.api?.forEachNode(t=>{e.push(t.data)}),e},updateModelIfUsed(e){this.gridReadyFired&&this.$attrs[Ce]&&Ot.has(e)&&this.emitRowModel&&this.emitRowModel()},getRowDataBasedOnBindings(){const e=this,t=e.modelValue;return t||(e.rowData?e.rowData:e.gridOptions.rowData)},getProvides(){let e=ct(),t={};for(;e;)e&&e.provides&&(t={...t,...e.provides}),e=e.parent;return t},skipChange(e,t,n){if(this.gridReadyFired&&e==="rowData"&&this.$attrs[Ce]){if(t===n)return!0;if(t&&n){const s=t,r=n;if(s.length===r.length){for(let o=0;o<s.length;o++)if(s[o]!==r[o])return!1;return!0}}}return!1},debounce(e,t){let n;return()=>{const s=function(){e()};window.clearTimeout(n),n=window.setTimeout(s,t)}}},mounted(){this.emitRowModel=this.debounce(()=>{this.$emit(Et,Object.freeze(this.getRowData()))},20);const e=this.getProvides(),t=new _t(this,e),n=Y(Ie(c(this.gridOptions),this));this.checkForBindingConflicts();const s=this.getRowDataBasedOnBindings();s!==Ee.VUE_OMITTED_PROPERTY&&(n.rowData=ve(s));const r={globalEventListener:this.globalEventListenerFactory().bind(this),globalSyncEventListener:this.globalEventListenerFactory(!0).bind(this),frameworkOverrides:new Rt(this),providedBeanInstances:{frameworkComponentWrapper:t},modules:this.modules};this.api=ye(this.$el,n,r),this.gridCreated=!0},unmounted(){this.gridCreated&&(this.api?.destroy(),this.isDestroyed=!0)}});export{yt as AgGridVue};/*! Bundled license information:

@vue/shared/dist/shared.esm-bundler.js:
  (**
  * @vue/shared v3.4.26
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **)
  (*! #__NO_SIDE_EFFECTS__ *)

@vue/reactivity/dist/reactivity.esm-bundler.js:
  (**
  * @vue/reactivity v3.4.26
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **)
*/
